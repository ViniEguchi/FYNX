<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Home - Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <link rel="stylesheet" href="../css/dashboard-css/home.css">
  <link rel="stylesheet" href="../css/dashboard-css/global.css">
</head>

<body onload="carregarPerfil()">

  <main>
    <div class="side-menu">
      <img class="logo" src="../assets/icon/v5-removebg-preview 2.png" alt="">

      <div class="options">
        <div class="option selected">
          <img src="../assets/icon/home (1) 2.png" alt="">
          <a href="../dashboard/home.html">HOME</a>
        </div>
        <div class="option">
          <img src="../assets/icon/bar-chart 4.png" alt="">
          <a href="../dashboard/dashboard.html">DASHBOARD</a>

        </div>
        <div class="option">
          <img src="../assets/icon/user (1) 2.png" alt="">
          <a href="../dashboard/users.html">USUÁRIOS</a>
        </div>
        <div class="option">
          <img src="../assets/icon/edit 2.png" alt="">
          <a href="../dashboard/perfil.html">EDITAR</a>
        </div>
        <div class="option">
          <img src="../assets/icon/logout 2.png" alt="">
          <a href="../index.html">SAIR</a>
        </div>
      </div>
    </div>

    <div class="container">
        <div class="header">
          <div class="container-textos-header">
            <p>INICIO</p>
            <p class="bem-vindo">BEM VINDO, <span id="usuario"></span>!</p>

            <div class="container-hamburguer-menu" style="display: none;">
              <button class="menu-btn" id="menuButton" onclick="toggleMenu()">☰</button>

              <ul class="navbar sidebar" id="sidebar">
                <button class="close-btn" onclick="toggleMenu()">✖</button>
                <img class="logo" src="../assets/icon/v5-removebg-preview 2.png" alt="">

                <div class="options">
                  <div class="option selected">
                    <img src="../assets/icon/home (1) 2.png" alt="">
                    <a href="../dashboard/home.html">HOME</a>
                  </div>
                  <div class="option">
                    <img src="../assets/icon/bar-chart 4.png" alt="">
                    <a href="../dashboard/dashboard.html">DASHBOARD</a>
                  </div>
                  <div class="option">
                    <img src="../assets/icon/user (1) 2.png" alt="">
                    <a href="../dashboard/users.html">USUÁRIOS</a>
                  </div>
                  <div class="option">
                    <img src="../assets/icon/edit 2.png" alt="">
                    <a href="../dashboard/perfil.html">EDITAR</a>
                  </div>
                  <div class="option">
                    <img src="../assets/icon/logout 2.png" alt="">
                    <a href="../index.html">SAIR</a>
                  </div>
                </div>
              </ul>
            </div>

            <!-- <button class="menu-toggle" onclick="toggleSidebar()" style="background: none; border: none; margin-right: 30px; cursor: pointer;">
                <img src="../assets/icon/Header.png" alt="Menu" style="width: 30px; height: 30px;">
              </button> -->
          </div>
        </div>

        <div class="caixa-principal">
            <div class="linha-setores">
              <div class="caixa-setor">
                <p>Setor c/ maior operação</p>
                <div class="caixa-branca" style="display: flex; align-items: center; justify-content: center;">Varejo - 90.000</div>
              </div>
              <div class="caixa-setor">
                <p>Menor taxa de juros</p>
                <div class="caixa-branca" style="display: flex; align-items: center; justify-content: center;">Industria extrativa - 3% a.a</div>
              </div>
              <div class="caixa-setor">
                <p>Valor Total Concedido</p>
                <div class="caixa-branca" style="display: flex; align-items: center; justify-content: center;">R$ 1.530.000</div>
              </div>
            </div>
          </div>
          
          <div class="graficos-superiores">
            <div class="grafico-box"><canvas id="grafico1"></canvas></div>
            <div class="grafico-box"><canvas id="grafico2"></canvas></div>
            <div class="grafico-box"><canvas id="grafico3"></canvas></div>
          </div>
  
          <div class="grafico-maior">
            <canvas id="graficoPrincipal"></canvas>
          </div>
        </div>
      </div>
          
    
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>

    function toggleMenu() {
      const sidebar = document.getElementById("sidebar");
      const menuButton = document.getElementById("menuButton");

      sidebar.classList.toggle("active");
      menuButton.classList.toggle("hidden");
    }

      usuario.innerHTML = sessionStorage.NOME_USUARIO;

// function toggleSidebar() {
//   const menu = document.getElementById('sideMenu');
//   const isHidden = menu.style.display === 'none';

//   if (isHidden) {
//     menu.style.display = 'flex';  // Torna o menu visível
//   } else {
//     menu.style.display = 'none';  // Esconde o menu
//   }
// }
      // Gráfico 1 - Setores A, B, C
      new Chart(document.getElementById("grafico1"), {
        type: 'bar',
              data: {
                labels: ['Transporte', 'Comércio', 'Alimentação', 'Varejo'],
                datasets: [{
                  label: 'Total de operações por setor',
                  data: [50000, 30000, 70000, 90000],
                  backgroundColor: '#04251F'
                }]
              },
              options: {
              plugins: { legend: { display: true } },
              scales: {
                y: { beginAtZero: true }
              },
              responsive: true,
              maintainAspectRatio: false,
             }
      });

      // Gráfico 2 - Setores A, B, C
      new Chart(document.getElementById("grafico2"), {
        type: 'bar',
        data: {
          labels: ['Comércio', 'Agropecuária', 'Industria extrativa'],
          datasets: [{
            label: 'Juros médio por setor',
            data: [5.3, 4.7, 3],
            backgroundColor: ['#04251F', '#04251F', '#04251F']
          }]
        },
        options: {
          plugins: { legend: { display: true } },
          responsive: true,
          maintainAspectRatio: false,
        }
      });

      // Gráfico 3 - Setores A, B, C
        new Chart(document.getElementById("grafico3"), {
          type: 'bar',
          data: {
            labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril'], // Meses no eixo X
            datasets: [
              {
                label: 'Agropecuária',
                data: [8, 7, 6, 9], // Prazo em meses
                backgroundColor: '#04251F'
              },
              {
                label: 'Comércio',
                data: [6, 5, 5, 7],
                backgroundColor: '#065143'
              },
              {
                label: 'Indústria extrativa',
                data: [10, 9, 8, 11],
                backgroundColor: '#0A7E69'
              }
            ]
          },
          options: {
            plugins: {
              legend: { display: true }
            },
            scales: {
              y: {
                beginAtZero: true,
                title: {
                  display: true,
                  text: 'Prazo (meses)'
                }
              },
              x: {
                stacked: false
              }
            },
            responsive: true,
            maintainAspectRatio: false,
          }
        });
      
        new Chart(document.getElementById("graficoPrincipal"), {
          type: 'line',
        data: {
          labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'], // Meses no eixo X
          datasets: [
            {
              label: 'Comércio',
              data: [50000, 52000, 51000, 53000, 54000, 55000],
              borderColor: '#04251F',
              tension: 0.3,
              fill: false
            },
            {
              label: 'Indústria',
              data: [40000, 42000, 41000, 43000, 44000, 45000],
              borderColor: '#065143',
              tension: 0.3,
              fill: false
            },
            {
              label: 'Serviços',
              data: [60000, 62000, 61000, 63000, 64000, 65000],
              borderColor: '#388E3C',
              tension: 0.3,
              fill: false
            },
            {
              label: 'Agropecuária',
              data: [30000, 32000, 31000, 33000, 34000, 35000],
              borderColor: '#0A7E69',
              tension: 0.3,
              fill: false
            }
          ]
        },
        options: {
          plugins: {
            legend: { display: true }
          },
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Valor concedido (R$)'
              }
            },
            x: {
              title: {
                display: true,
                text: 'Mês'
              }
            }
          },
          responsive: true,
          maintainAspectRatio: false,
        }
      });
    </script>

    <script>
          const tipoUsuario = sessionStorage.IS_GERENTE; 
    const paginaAtual = window.location.pathname;  

    const optionsContainer = document.querySelector('.options');

    optionsContainer.innerHTML = `
      <div class="option ${paginaAtual.includes('home.html') ? 'selected' : ''}">
        <img src="../assets/icon/home (1) 2.png" alt="">
        <a href="../dashboard/home.html">HOME</a>
      </div>
      <div class="option ${paginaAtual.includes('dashboard.html') ? 'selected' : ''}">
        <img src="../assets/icon/bar-chart 4.png" alt="">
        <a href="../dashboard/dashboard.html">DASHBOARD</a>
      </div>
      ${tipoUsuario == 1 ? `
        <div class="option ${paginaAtual.includes('users.html') ? 'selected' : ''}">
          <img src="../assets/icon/user (1) 2.png" alt="">
          <a href="../dashboard/users.html">USUÁRIOS</a>
        </div>
      ` : ''}
      <div class="option ${paginaAtual.includes('perfil.html') ? 'selected' : ''}">
        <img src="../assets/icon/edit 2.png" alt="">
        <a href="../dashboard/perfil.html">EDITAR</a>
      </div>
      <div class="option">
        <img src="../assets/icon/logout 2.png" alt="">
        <a href="../index.html">SAIR</a>
      </div>
    `;
    </script>
  </body>
  </html>